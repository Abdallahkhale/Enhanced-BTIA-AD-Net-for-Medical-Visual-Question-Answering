# config/config.yaml
# Enhanced BTIA-AD Net Configuration

model:
  # Pretrained Models
  vision_encoder: "microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"
  text_encoder: "microsoft/BiomedNLP-BiomedBERT-base-uncased-abstract-fulltext"
  
  # Architecture
  hidden_dim: 768
  num_heads: 8
  num_attention_layers: 2
  dropout: 0.3
  top_k_answers: 5
  
  # Feature Fusion
  fusion_method: "btia"  # bi-text-image attention
  use_answer_distillation: true
  
  # Solution 3: Embedding Matching (better for open-ended questions)
  use_embedding_matching: true  # Uses cosine similarity instead of classification

training:
  # Batch and Learning
  batch_size: 16
  learning_rate: 2.0e-5
  weight_decay: 0.01
  epochs: 50
  warmup_ratio: 0.1
  
  # RTX 5070 Ti Optimizations
  fp16: true
  gradient_accumulation_steps: 2
  gradient_checkpointing: true
  
  # Checkpointing
  save_every_epoch: true
  checkpoint_dir: "checkpoints"
  resume_from: null
  
  # Early Stopping
  early_stopping_patience: 10
  early_stopping_metric: "val_accuracy"

data:
  # Image Settings
  image_size: 224
  
  # Text Settings
  max_question_length: 64
  max_answer_length: 32
  
  # Dataset Augmentation
  use_slake_augmentation: false  # SLAKE images not available on HuggingFace
  use_pathvqa_augmentation: true  # Add 32K+ pathology samples!
  train_split: 0.8
  num_workers: 4
  
  # Data Directories
  vqa_rad_dir: "data/vqa_rad"
  slake_dir: "data/slake"
  pathvqa_dir: "data/pathvqa"

logging:
  log_dir: "logs"
  log_every_n_steps: 10
  use_tensorboard: true
